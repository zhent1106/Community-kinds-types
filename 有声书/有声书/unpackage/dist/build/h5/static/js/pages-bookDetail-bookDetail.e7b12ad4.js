(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bookDetail-bookDetail"],{"002d":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"geryTheme"},[n("page-title",{staticClass:"cal",attrs:{Theme:"geryTheme"}},[t._v("图书详情")]),n("v-uni-view",{staticClass:"flex align-center py-2 cal",staticStyle:{height:"250rpx"}},[n("v-uni-image",{staticClass:"flex-1 mx-2 rounded",staticStyle:{width:"250rpx",height:"210rpx"},attrs:{src:t.currentBook.imgurl,mode:"aspectFill","lazy-load":!0}}),n("v-uni-view",{staticClass:"flex-2 mx-2"},[n("v-uni-view",{staticStyle:{"font-size":"45rpx"}},[t._v(t._s(t.currentBook.name))]),n("v-uni-view",{staticClass:"font mt-1"},[t._v("作者: "+t._s(t.currentBook.author))]),n("v-uni-view",{staticClass:"flex align-center mt-2"},[n("v-uni-button",{staticClass:"flex-1 mx-1"},[t._v("分享")]),n("v-uni-button",{staticClass:"flex-1 mx-1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collectThisBook.apply(void 0,arguments)}}},[t._v(t._s(t.collectStatus?"已收藏":"收藏"))])],1)],1)],1),n("v-uni-view",{staticClass:"shadow bg-white"},[n("tab-top",{staticClass:"cal",attrs:{tabArr:["详情","目录"],tabIndex:t.tabIndex},on:{changeTabIndex:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTabIndex.apply(void 0,arguments)}}}),n("v-uni-swiper",{style:{height:t.calHeight+"rpx"},attrs:{current:t.tabIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChangeIndex.apply(void 0,arguments)}}},[n("v-uni-swiper-item",[n("v-uni-scroll-view",{style:{height:t.calHeight+"rpx"},attrs:{"scroll-y":!0}},[n("v-uni-view",[n("v-uni-view",{staticClass:"py-2 flex justify-center text-light-black"},[t._v("——简介——")]),n("v-uni-view",{staticClass:"px-2 font-lg",staticStyle:{"line-height":"80rpx"}},[t._v(t._s(t.currentBook.synopsis))])],1)],1)],1),n("v-uni-swiper-item",[n("v-uni-scroll-view",{style:{height:t.calHeight+"rpx"},attrs:{"scroll-y":!0}},[t._l(t.chapterCatalog,(function(e){return[n("v-uni-view",{key:e.id+"_0",staticClass:"p-2 text-ellipsis border-bottom",attrs:{"hover-class":"bg-light"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toReadingPage(e.id)}}},[t._v(t._s(e.title))])]}))],2)],1)],1)],1)],1)},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},"03ee":function(t,e,n){"use strict";n.r(e);var a=n("619a"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"14b9":function(t,e,n){var a=n("5ca1");a(a.P,"String",{repeat:n("9744")})},"1cfa":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7514"),n("c5f6"),n("96cf");var i=a(n("3b8d"));n("20d6");var r,c=a(n("bcb2")),u=a(n("e5bc")),s=a(n("ce25")),o=getApp().globalData.collectedBooks,l={data:function(){return{calHeight:0,tabIndex:0,collectStatus:!1,currentBook:{name:"",author:"",synopsis:"",imgurl:""},chapterCatalog:[]}},components:{tabTop:u.default,pageTitle:s.default},methods:{changeTabIndex:function(t){this.tabIndex=t},swiperChangeIndex:function(t){this.tabIndex=t.detail.current},toReadingPage:function(t){uni.navigateTo({url:"/pages/reading/reading?chapterID=".concat(t)})},collectThisBook:function(){this.collectStatus=!this.collectStatus,uni.showToast({icon:"none",title:this.collectStatus?"已收藏":"取消收藏成功"});var t=o.findIndex((function(t){return t.id===r}));this.collectStatus?o.push(this.currentBook):o.splice(t,1)}},onLoad:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n,a,i,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Number(e.bookID),t.next=3,this.$http.get("/testSynopsis");case 3:if(n=t.sent,a=n.chapterCatalog,this.chapterCatalog=a,i=o.find((function(t){return t.id===r})),!i){t.next=10;break}return this.collectStatus=!0,t.abrupt("return",this.currentBook=i);case 10:return t.next=12,this.$http.get("/book");case 12:c=t.sent,u=c.list,this.currentBook=u.find((function(t){return t.id===r}));case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),mounted:function(){var t=this;c.default.calSurplusHeight({pageID:this,pos:"cal",success:function(e){return t.calHeight=e}})}};e.default=l},"29c0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{statusBarHeight:this.$statusBarHeight}},props:{Theme:{type:String,default:"bg-white"}},methods:{quit:function(){uni.navigateBack({delta:1})}}};e.default=a},5149:function(t,e,n){var a=n("7533");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("e54ae370",a,!0,{sourceMap:!1,shadowMode:!1})},"619a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={props:{tabIndex:{type:Number,default:0},tabArr:{type:Array,default:function(){return[]}}},methods:{changeTabIndex:function(t){this.$emit("changeTabIndex",t)}}};e.default=a},"6abb":function(t,e,n){"use strict";n.r(e);var a=n("002d"),i=n("81a7");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("6ca6");var c,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"61de4654",null,!1,a["a"],c);e["default"]=s.exports},"6ca6":function(t,e,n){"use strict";var a=n("5149"),i=n.n(a);i.a},7533:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".geryTheme[data-v-61de4654]{background-color:#a8b0c3}",""]),t.exports=e},"81a7":function(t,e,n){"use strict";n.r(e);var a=n("1cfa"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},8673:function(t,e,n){"use strict";n.r(e);var a=n("29c0"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},9744:function(t,e,n){"use strict";var a=n("4588"),i=n("be13");t.exports=function(t){var e=String(i(this)),n="",r=a(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},bcb2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a"),n("14b9");var a=uni.getSystemInfoSync().windowWidth,i=uni.getSystemInfoSync().windowHeight,r=function(t){return 750*t/a},c=function(t){return t*a/750},u=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?r(i):i},s=function(t){if(!t&&0!==t)return"00:00";var e=Math.floor(t/60),n=Math.floor(t%60),a=function(t){return"0".repeat(2-String(t).length)};return"".concat(a(e)+e,":").concat(a(n)+n)},o=function(t){var e=t.pageID,n=t.pos,a=t.success,i=[],r=uni.createSelectorQuery().in(e);r.selectAll(".".concat(n)).boundingClientRect((function(t){t.forEach((function(t){return i.push(t.height)})),a(i)})).exec()},l=function(t){var e=t.pageID,n=t.pos,a=t.isRpx,c=void 0===a||a,u=t.isTabBarPage,s=void 0!==u&&u,l=t.success;o({pageID:e,pos:n,success:function(t){var e=t.reduce((function(t,e){return t+e})),n=s?i-e-50:i-e;n=c?r(n):n;var a=Math.floor(n);l(a)}})},f={Torpx:r,Topx:c,getSystemHeight:u,formatTime:s,getNodesHeightInfo:o,calSurplusHeight:l};e.default=f},cba2:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:t.Theme},[n("v-uni-view",{class:t.Theme,style:{height:t.statusBarHeight+"px",paddingTop:"60rpx"}}),n("v-uni-view",{staticClass:"fixed-top",class:t.Theme,style:{height:t.statusBarHeight+"px"}}),n("v-uni-view",{staticClass:"flex align-center position-fixed w-100",class:t.Theme,staticStyle:{"z-index":"99"},style:{height:"60rpx",top:t.statusBarHeight+"px"}},[n("my-icon",{staticClass:"mx-2",attrs:{iconId:"icon-jiantou-copy"},on:{"my-click":function(e){arguments[0]=e=t.$handleEvent(e),t.quit.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"font-lg"},[t._t("default")],2)],1)],1)},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},ce25:function(t,e,n){"use strict";n.r(e);var a=n("cba2"),i=n("8673");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var c,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"1ed0f388",null,!1,a["a"],c);e["default"]=s.exports},ddb8:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center border-bottom",staticStyle:{height:"80rpx","justify-content":"space-around"}},[t._l(t.tabArr,(function(e,a){return[n("v-uni-view",{key:a+"_0",staticClass:"flex flex-column align-center justify-between",staticStyle:{height:"80rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTabIndex(a)}}},[n("v-uni-view",{staticClass:"text-light-black pt-1 animated faster",class:t.tabIndex===a?"font-weight-bold pulse":""},[t._v(t._s(e))]),t.tabIndex===a?n("v-uni-view",{staticClass:"rounded animated zoomIn faster",staticStyle:{width:"80rpx",height:"8rpx","background-color":"#fb5f39"}}):t._e()],1)]}))],2)},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},e5bc:function(t,e,n){"use strict";n.r(e);var a=n("ddb8"),i=n("03ee");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var c,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"50a3bd2b",null,!1,a["a"],c);e["default"]=s.exports}}]);